{% render 'partials/head.liquid' %}

<main class="index-main">

  <h1>Squadpage</h1>
  <p class="sub-title">Ontdek meer over squad 1G hieronder!</p>

  <input type="checkbox" id="tint" hidden>
  <button class="button-stop-animatie" type="button">Stop animatie</button>

  <ul class="filter-select-buttons">
    <li><a href="/">Avatar</a></li>
    <li><a href="/dier/">Dier</a></li>
    <li><a href="/emoji/">Emoji</a></li>
    <li><a href="/eten/">Eten</a></li>
    <li><a href="/hobby/">Hobby</a></li>
    <li><a href="/kleur/">Kleur</a></li>
    <li><a href="/land/">Land</a></li>
    <li><a href="/verjaardag/">Verjaardag</a></li>
  </ul>

  <div class="figure-container">
    {% for person in persons %}
    <figure>
      <label for="tint" class="label-focus" tabindex="0">

        <!-- Voorkant van de kaart -->
        <div class="profile-bubble">
          {% if show == 'avatar' %}
          {% if person.avatar and person.avatar != '' %}
          <img src="{{ person[show] }}" alt="Avatar van {{ person.name }}" />
          {% else %}
          <img src="https://github.com/{{ person.github_handle }}.png" alt="Avatar van {{ person.name }}" />
          {% endif %}
          {% else %}
          <article class="{{ show }}">
            {% if show == "fav_country" %}
            {% case person.fav_country | downcase %}
            {% when "pol" %} 🇵🇱
            {% when "gbr" %} 🇬🇧
            {% when "fra" %} 🇫🇷
            {% when "esp" %} 🇪🇸
            {% when "usa" %} 🇺🇸
            {% when "irl" %} 🇮🇪
            {% when "che" %} 🇨🇭
            {% when "idn" %} 🇮🇩
            {% when "sur" %} 🇸🇷
            {% when "ita" %} 🇮🇹
            {% when "grc" %} 🇬🇷
            {% when "hrv" %} 🇭🇷
            {% when "tur" %} 🇹🇷
            {% when "eth" %} 🇪🇹
            {% when "jpn" %} 🇯🇵
            {% else %}
            {{ person.fav_country }}
            {% endcase %}
            {% endif %}

            {% if show == "fav_animal" %}
            {% case person.fav_animal | downcase %}
            {% when "aap" %} 🐒
            {% when "cavia" %} 🐹
            {% when "dino" %} 🦖
            {% when "dolfijn" %} 🐬
            {% when "eend" %} 🦆
            {% when "eenhoorn" %} 🦄
            {% when "egel" %} 🦔
            {% when "giraffe" %} 🦒
            {% when "haai" %} 🦈
            {% when "hamster" %} 🐹
            {% when "hond" %} 🐶
            {% when "inktvis" %} 🦑
            {% when "kat" %} 🐱
            {% when "kikker" %} 🐸
            {% when "kip" %} 🐔
            {% when "koe" %} 🐮
            {% when "konijn" %} 🐰
            {% when "krokodil" %} 🐊
            {% when "leeuw" %} 🦁
            {% when "olifant" %} 🐘
            {% when "otter" %} 🦦
            {% when "paard" %} 🐴
            {% when "panda" %} 🐼
            {% when "schaap" %} 🐑
            {% when "schildpad" %} 🐢
            {% when "tijger" %} 🐯
            {% when "vis" %} 🐟
            {% when "vlinder" %} 🦋
            {% when "vogel" %} 🐦
            {% when "zebra" %} 🦓
            {% when "zeehond" %} 🦭
            {% else %}
            {{ person.fav_animal }}
            {% endcase %}
            {% endif %}

            {% if show == "fav_emoji" %}
            {{ person.fav_emoji }}
            {% endif %}

            {% if show == "fav_kitchen" %}
            {% case person.fav_kitchen | downcase %}
            {% when "bami" %} 🍜
            {% when "hamburger" %} 🍔
            {% when "indische rijsttafel" %} 🍛
            {% when "lasagne" %} 🍝
            {% when "nasi" %} 🍚
            {% when "pannenkoeken" %} 🥞
            {% when "patat" %} 🍟
            {% when "pizza" %} 🍕
            {% when "pasta" %} 🍝
            {% when "souvlaki" %} 🍢
            {% when "sushi" %} 🍣
            {% when "taco's" %} 🌮
            {% when "tonijn" %} 🐟
            {% when "zalm" %} 🐟
            {% else %}
            {{ person.fav_kitchen }}
            {% endcase %}
            {% endif %}

            {% if show == "fav_hobby" %}
            {% case person.fav_hobby | downcase %}
            {% when "call of duty" %} 🎮
            {% when "coden" %} 💻
            {% when "fitness" %} 🏋️‍♂️
            {% when "gamen" %} 🎮
            {% when "lezen" %} 📖
            {% when "muziek" %} 🎶
            {% when "sporten" %} 🏅
            {% when "uitgaan" %} 🍻
            {% else %}
            {{ person.fav_hobby }}
            {% endcase %}
            {% endif %}


            {% if show == "fav_color" %}
              <div class="profile_bubble" style="background-color: {{ person.fav_color }}; border-radius: 50%; width: 6rem; height: 6rem;">
              </div>
            {% endif %}
            
            
            
            
            {% if show == "birthdate" %}
            {{ person.birthdate }}
            {% endif %}
          </article>

          {% endif %}

          <form action="/like" method="POST" class="like-container">
            <input type="hidden" name="studentid" value="{{ person.id }}">
            <button type="submit" class="like-button">
              <svg class="svgLike" xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 24 24"
                width="48px" height="48px">
                <path
                  d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z" />
              </svg>
            </button>
            <span class="like-count">{{ likes[person.id] | default: 0 }} likes</span>
          </form>

          <a class="github-link" href="https://github.com/{{ person.github_handle }}?tab=repositories">github</a>

        </div>
      </label>

    </figure>
    {%- endfor %}
  </div>

  <div class="tinted-background" aria-hidden="true"></div>
</main>


<style>
  /* Algemene stijlen */
  html,
  body {
    background-color: #04083F;
    font-family: Verdana, Geneva, Tahoma, sans-serif;
  }

  h1 {
    text-align: center;
    font-size: xx-large;
    color: #88E2C1;
  }

  .sub-title {
    color: #04083F;
    background-color: #9F7AEF;
    padding: 0.7rem;
    border-radius: 50rem;
    margin: 1rem;
    font-size: 1rem;
    text-align: center;
    max-width: max-content;
    justify-self: center;
  }

  ul {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    list-style: none;
    margin: 4.5rem 0rem 1.5rem 0rem;
    padding: 0;
    gap: 1rem;

    li {
      border-radius: 50rem;
      padding: 0.7rem;
      border: 0.2rem solid #67c09f;
      background-color: #88E2C1;
      cursor: pointer;

      a {
        color: #04083F;
        text-decoration: none;
      }
    }
  }

  .fav_emoji,
  .fav_country,
  .fav_animal,
  .fav_kitchen,
  .fav_hobby {
    font-size: 4rem;
  }

  .index-main {
    #tint:checked~.tinted-background {
      display: block;
    }

    #tint:checked~.label-focus:has(.profile-bubble.static)~.tinted-background {
      display: none;
    }

    .tinted-background {
      display: none;
      position: fixed;
      inset: 0;
      background-color: rgba(0, 0, 0, 0.5);
      z-index: 99;
      animation: overlay-transition 500ms ease-in;
    }

    .button-stop-animatie {
      position: absolute;
      top: 1em;
      left: 1em;
      color: #88E2C1;
      width: 8em;
      z-index: 101;
      border-radius: 50rem;
      padding: 0.7rem;
      border: 0.2rem solid #88E2C1;
      background-color: #04083F;
      text-decoration: underline;
      cursor: pointer;
      text-decoration: none;
      font-size: 1em;

      &:hover {
        filter: brightness(0.8);
      }

      @media (max-width: 1120px) {
        left: 50%;
        transform: translateX(-50%);
        top: 8.5rem;
      }

    }
  }

  .figure-container {
    margin-top: 3.5rem;
  }

  .profile-bubble {
    --size-circle: 7em;

    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    position: absolute;

    width: var(--size-circle);
    height: var(--size-circle);
    aspect-ratio: 1;
    border-radius: 50%;
    background-color: #b594fc;
    border: 5px solid var(--fav_color, #9F7AEF);
    cursor: pointer;
    z-index: var(--z);

    animation:
      transX calc(var(--durX) * 1s) linear infinite alternate,
      transY calc(var(--durY) * 1s) linear infinite alternate;

    &:hover {
      animation-play-state: paused;
      filter: brightness(1.2);
    }

    .like-container {
      background-color: aqua;
      margin-left: 1em;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }

    .like-button {
      display: none;
      border: none;
      background-color: inherit;
      color: red;
    }

    .like-count {
      display: none;
    }

    .github-link {
      display: none;
      grid-area: 2/1;
    }

    &.open {
      display: grid;
      grid-template-columns: min-content 1fr 4em;
      grid-template-rows: 1fr 1fr;
      animation: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      z-index: 101;
      height: 10em;
      width: 15em;
      border-radius: 15px;

      .like-button,
      .like-count,
      .github-link {
        display: block;
      }
    }

    &.static {
      position: relative;
      animation: none;


      &.open {
        display: grid;
        grid-template-columns: min-content 1fr 4em;
        grid-template-rows: 1fr 1fr;
        animation: none;
        z-index: 101;
        height: 10em;
        width: 15em;
        border-radius: 15px;
        position: absolute;

        .website {
          display: none;
        }
      }
    }
  }

  img {
    width: 6rem;
    height: 6rem;
    border-radius: 50%;
  }

  .static-main {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(110px, 2fr));
    gap: 1.5rem;
    justify-items: center;
  }


  @keyframes transX {
    0% {
      translate: 0;
    }

    100% {
      translate: calc(100dvw - var(--size-circle) - 5em);
    }
  }

  @keyframes transY {
    0% {
      transform: translatey(0);
    }

    100% {
      transform: translatey(calc(100dvh - var(--size-circle) - 5em));
    }
  }
</style>




<!-- ===================== -->




<script>
  // selecteer alle cirkels
  let cirkels = document.querySelectorAll(".profile-bubble")
  let stopAnimation = document.querySelector(".button-stop-animatie")

  // genereer nieuwe custom properties
  setPropertyXY()
  // genereer nieuwe custom properties om de 10s
  // let cirkelAnimation = setInterval(setPropertyXY, 10000);


  // Bij een click wordt een class toegevoegd aan de ge-klikte cirkel
  cirkels.forEach(cirkel => {
    cirkel.addEventListener("click", () => {
      cirkel.classList.toggle("open")
    });
  });


  // stop animaties als de stop animatie button geklikt wordt
  stopAnimation.addEventListener("click", (e) => {
    // verander de tekst in de button
    if (stopAnimation.innerText === "Start animatie") {
      stopAnimation.innerText = "Stop animatie";
    } else {
      stopAnimation.innerText = "Start animatie";
    }

    // stop de keyframe animaties
    cirkels.forEach(cirkel => {
      cirkel.classList.toggle("static")
    });

    // zoek de parrent container en verander de layout met een class
    const parentContainer = document.querySelector('.figure-container');
    parentContainer.classList.toggle('static-main');
  });


  // genereer random getallen, seconden, voor de keyframe animatie
  function setPropertyXY() {
    cirkels.forEach(cirkel => {
      // https://www.w3schools.com/js/js_random.asp
      durX = Math.floor(Math.random() * 10);
      durY = Math.floor(Math.random() * 10);
      // z-index
      z = Math.floor(Math.random() * 100);

      // maak custom properties van de random seconden
      cirkel.style.setProperty('--durX', durX)
      cirkel.style.setProperty('--durY', durY)
      cirkel.style.setProperty('--z', z)
    });
  }
</script>


<script>




</script>
{% render 'partials/foot.liquid' %}